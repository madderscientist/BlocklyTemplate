{"blocks":{"languageVersion":0,"blocks":[{"type":"global_declaration","id":"^j~pw|K_zhL~8[[45$7@","x":-62,"y":13,"fields":{"NAME":"消息队列"},"inputs":{"VALUE":{"block":{"type":"lists_create_with","id":"CqjvPD6o^d|%}HnW{-n+","extraState":{"itemCount":0}}}}},{"type":"local_declaration_statement","id":"x}n$oN7YukEq|tL42aKF","x":-62,"y":163,"extraState":"<mutation><localname name=\"串口\"></localname></mutation>","icons":{"comment":{"text":"本案例意在展示串口通信。所连接的串口设备接收到x则返回x+1，浏览器接收到后可以每两项求和一次。使用了消息队列结构。","pinned":false,"height":80,"width":160}},"fields":{"VAR0":"串口"},"inputs":{"DECL0":{"block":{"type":"serial_get","id":"Q-@EXut0M_|%8Lt,$)O%"}},"STACK":{"block":{"type":"serial_connect","id":"8:0$$:T.5t~=1`#,WB*{","fields":{"Parity":"none","VAR":"data"},"inputs":{"Serial":{"block":{"type":"lexical_variable_get","id":"J)1T!Mwq!^jZ+v$#83_b","fields":{"VAR":"串口"}}},"BaudRate":{"shadow":{"type":"math_number","id":"{cHKA77*fRX}#@Z6y1b7","fields":{"NUM":9600}}},"Stop":{"shadow":{"type":"math_number","id":"]/{/ta.z5@#Ah_A@vD/6","fields":{"NUM":1}}},"DO":{"block":{"type":"lexical_variable_set","id":"U5e]hgLM:Oo]Zi)/dPx}","fields":{"VAR":"global 消息队列"},"inputs":{"VALUE":{"block":{"type":"lists_concat","id":"T.93ma(`EPzlP3ov!dtB","extraState":{"itemCount":2},"inputs":{"ADD0":{"block":{"type":"lexical_variable_get","id":"/WB/`7f4[/gF10,dC5fV","fields":{"VAR":"global 消息队列"}}},"ADD1":{"block":{"type":"lexical_variable_get","id":"f(%lOK-eL$hC*0OvX_3S","fields":{"VAR":"data"}}}}}}},"next":{"block":{"type":"controls_forEach","id":"f3MAaA}EsZ1[0V|eQ:!M","fields":{"VAR":"item"},"inputs":{"LIST":{"block":{"type":"lexical_variable_get","id":"jQ?6c/xXry-XlDp{:4Bi","fields":{"VAR":"data"}}},"DO":{"block":{"type":"controls_delay","id":"D_8iP}=hwY@T6({QbgTX","inputs":{"time":{"shadow":{"type":"math_number","id":"XO!.vKdXUjXDtF[RLGXM","fields":{"NUM":500}}}},"next":{"block":{"type":"controls_print","id":"Ti2[nu8,{F;:y{77fJ-8","inputs":{"msg":{"shadow":{"type":"text","fields":{"TEXT":"!"}},"block":{"type":"lexical_variable_get","id":"OSi66lQWmZvP0[-v|Y^1","fields":{"VAR":"item"}}}},"next":{"block":{"type":"serial_send","id":"byhd?N}qwVv5(|H$[ABP","inputs":{"Serial":{"block":{"type":"lexical_variable_get","id":"ek5@%nV[c1@cUOMAl5-(","fields":{"VAR":"串口"}}},"data":{"block":{"type":"lists_create_with","id":"v+1He4Yalf!Dd|;M0HaM","extraState":{"itemCount":1},"inputs":{"ADD0":{"block":{"type":"lexical_variable_get","id":"S]^;JMP]hKIG(y[;8G3T","fields":{"VAR":"item"}}}}}}}}}}}}}}}}}}},"next":{"block":{"type":"controls_ignore_return","id":"SYMj8qH[0x-v}v*)pXVy","inputs":{"run":{"block":{"type":"controls_timeout","id":"5hCpfz4sm!XXc*waWW79","inputs":{"time":{"shadow":{"type":"math_number","id":"1[=cUt4?}{d`!G7.YAS`","fields":{"NUM":20000}}},"DO":{"block":{"type":"lexical_variable_set","id":"IeSCtlaJ;u6MLseIR(E[","fields":{"VAR":"global 运行结束"},"inputs":{"VALUE":{"block":{"type":"logic_boolean","id":"#(n:zw:4C+;u#*q9eXZk","fields":{"BOOL":"FALSE"}}}}}}}}}},"next":{"block":{"type":"serial_send","id":"AN}EyTbt1^lkHmmzNmgd","inputs":{"Serial":{"block":{"type":"lexical_variable_get","id":"Ub3fJ@xx.ee6FIN1#x~_","fields":{"VAR":"串口"}}},"data":{"block":{"type":"lists_create_with","id":"VX)Ci(_:#e_VNkNTx.!_","extraState":{"itemCount":1},"inputs":{"ADD0":{"block":{"type":"math_number","id":"Cy{{rfPP}Rvof]zS+{$K","fields":{"NUM":1}}}}}}},"next":{"block":{"type":"controls_whileUntil","id":"fGhfH=+N2L?q#Y=gaFCg","fields":{"MODE":"WHILE"},"inputs":{"BOOL":{"block":{"type":"lexical_variable_get","id":"siVC#O+r0oJ)KvY]3Yuw","fields":{"VAR":"global 运行结束"}}},"DO":{"block":{"type":"controls_delay","id":"h37{/E-Z`L!$3nx+}?Az","icons":{"comment":{"text":"必须加。不然卡死。延迟0秒使得js线程可以短暂搁置","pinned":false,"height":80,"width":160}},"inputs":{"time":{"shadow":{"type":"math_number","id":"/dbe!nA4jj4;.lBhS^O}","fields":{"NUM":0}}}},"next":{"block":{"type":"controls_if","id":"NP+3T-+mC(8%,k]WmtDs","inputs":{"IF0":{"block":{"type":"logic_compare","id":"MxQsRCkUZIy,64`S7sJ-","fields":{"OP":"GTE"},"inputs":{"A":{"block":{"type":"lists_length","id":"0nrrU-xWT^Y9*~v[U2n3","inputs":{"VALUE":{"block":{"type":"lexical_variable_get","id":"(5Y{jsMrG=O}g~f2OE-c","fields":{"VAR":"global 消息队列"}}}}}},"B":{"block":{"type":"math_number","id":"ua=/*B*XnbcY6BIL!H[7","fields":{"NUM":2}}}}}},"DO0":{"block":{"type":"controls_print","id":"bVLTe#G6*5*H96_y3.XB","inputs":{"msg":{"shadow":{"type":"text","fields":{"TEXT":"!"}},"block":{"type":"text_join","id":"#t^PGVsk]r8T?Z${JpsG","extraState":{"itemCount":5},"inputs":{"ADD0":{"block":{"type":"lists_getIndex","id":"_kZaw$v?:;sI`sA6+z}`","fields":{"MODE":"GET","WHERE":"FIRST"},"inputs":{"VALUE":{"block":{"type":"lexical_variable_get","id":"u^Tb)Kd3Y@E8S-RwM%QN","fields":{"VAR":"global 消息队列"}}}}}},"ADD1":{"block":{"type":"text","id":"kBsCN.,@aGgiO|ZllN.x","fields":{"TEXT":"+"}}},"ADD2":{"block":{"type":"lists_getIndex","id":"l]*{DN$}]e?qfQEZ:Xc6","fields":{"MODE":"GET","WHERE":"FROM_START"},"inputs":{"VALUE":{"block":{"type":"lexical_variable_get","id":"V]z1JWn~s(93w_u@aKoA","fields":{"VAR":"global 消息队列"}}},"AT":{"block":{"type":"math_number","id":"7e,C{)VqRZuPPlbh!4U5","fields":{"NUM":2}}}}}},"ADD3":{"block":{"type":"text","id":")6x+ZD.Dy5e2p9j);djj","fields":{"TEXT":"="}}},"ADD4":{"block":{"type":"math_arithmetic","id":"mW3t?V,y?m_8f7VyEK=|","fields":{"OP":"ADD"},"inputs":{"A":{"shadow":{"type":"math_number","fields":{"NUM":1}},"block":{"type":"lists_getIndex","id":"p!);MNGn,1dz_)p6c(ht","fields":{"MODE":"GET","WHERE":"FIRST"},"inputs":{"VALUE":{"block":{"type":"lexical_variable_get","id":"eHr!MF}mn^.%{U}u1]qJ","fields":{"VAR":"global 消息队列"}}}}}},"B":{"shadow":{"type":"math_number","fields":{"NUM":1}},"block":{"type":"lists_getIndex","id":"g59v~)Z:A50Q9NWBO~Nq","fields":{"MODE":"GET","WHERE":"FROM_START"},"inputs":{"VALUE":{"block":{"type":"lexical_variable_get","id":"D`wm9ekuMRPu]}*xCYjf","fields":{"VAR":"global 消息队列"}}},"AT":{"block":{"type":"math_number","id":"QC4F29p1wyHjm~WwY7]q","fields":{"NUM":2}}}}}}}}}}}}},"next":{"block":{"type":"lists_splice","id":"+,`Qc1Y@2pQQRhe7DrC6","extraState":{"itemCount":0},"inputs":{"list":{"block":{"type":"lexical_variable_get","id":"rumMK{k541B87qA(#5Ze","fields":{"VAR":"global 消息队列"}}},"at":{"shadow":{"type":"math_number","id":"cfe0HQ.69xm`3Pt*rAcQ","fields":{"NUM":1}}},"deleteNum":{"shadow":{"type":"math_number","id":"__`dQB`KXd~NMbrng{8g","fields":{"NUM":2}}}}}}}}}}}}}},"next":{"block":{"type":"serial_disconnect","id":"QWd4`VQT-JT1El:UbZKY","inputs":{"Serial":{"block":{"type":"lexical_variable_get","id":"Xtxu?I4u$$5*mJ:j!Z-+","fields":{"VAR":"串口"}}}}}}}}}}}}}}}},{"type":"global_declaration","id":"K0b!1g%%`jW(9)GK${`*","x":-63,"y":87,"fields":{"NAME":"运行结束"},"inputs":{"VALUE":{"block":{"type":"logic_boolean","id":"7`Q=g16=5J(~8Szz$z:L","fields":{"BOOL":"TRUE"}}}}}]},"backpack":[]}